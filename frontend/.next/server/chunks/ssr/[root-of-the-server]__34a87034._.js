module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},45056,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].React},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},31699,(a,b,c)=>{"use strict";b.exports=a.r(18622)},57850,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactJsxRuntime},97134,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactDOM},77969,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(70579);a.s(["MultipleImageUpload",0,({value:a=[],onChange:e,error:f,maxImages:g=10})=>{let[h,i]=(0,c.useState)(a),[j,k]=(0,c.useState)(!1),l=(0,c.useRef)(null);(0,c.useEffect)(()=>{i(a)},[a]);let m=(0,c.useCallback)(a=>{if(!a)return;let b=Array.from(a).filter(a=>a.type.startsWith("image/")),c=h.filter(a=>a instanceof File);if(c.length+b.length>g)return void alert(`You can only upload up to ${g} images. You already have ${c.length} images.`);let d=[...c,...b],f=[...h];b.forEach(a=>{f.push(a);let b=new FileReader;b.onloadend=()=>{i(c=>{let d=[...c],e=d.findIndex(b=>b===a);return -1!==e&&(d[e]=b.result),d})},b.readAsDataURL(a)}),i(f),e(d)},[h,e,g]),n=(0,c.useCallback)(a=>{a.preventDefault(),k(!1),m(a.dataTransfer.files)},[m]),o=(0,c.useCallback)(a=>{a.preventDefault(),k(!0)},[]),p=(0,c.useCallback)(a=>{a.preventDefault(),k(!1)},[]),q=(0,c.useCallback)(a=>{m(a.target.files)},[m]),r=(0,c.useCallback)(a=>{let b=h.filter((b,c)=>c!==a);i(b),e(b.filter(a=>a instanceof File))},[h,e]);return(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:`min-h-[300px] sm:min-h-[400px] md:min-h-[520px] rounded-xl border-4 border-dashed ${j?"border-white/30 bg-black/12":"border-white/12"} flex flex-col items-center justify-center text-white/45 bg-black/6 text-center cursor-pointer transition-colors relative overflow-hidden p-4 ${f?"border-red-500":""}`,onDrop:n,onDragOver:o,onDragLeave:p,onClick:()=>l.current?.click(),children:[h.length>0?(0,b.jsxs)("div",{className:"w-full h-full grid grid-cols-2 sm:grid-cols-3 gap-4 overflow-y-auto",children:[h.map((a,c)=>(0,b.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden group",children:[(0,b.jsx)(d.default,{src:"string"==typeof a?a:URL.createObjectURL(a),alt:`Preview ${c+1}`,fill:!0,className:"object-cover",unoptimized:!0}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),r(c)},className:"absolute top-2 right-2 w-8 h-8 bg-red-500/80 hover:bg-red-500 rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]},c)),h.length<g&&(0,b.jsx)("div",{className:"aspect-square rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40 transition-colors",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl mb-2",children:"+"}),(0,b.jsx)("div",{className:"text-xs",children:"Add Image"})]})})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-xl mb-2",children:"↓"}),(0,b.jsx)("div",{className:"text-sm",children:"Drop images here or click to upload"}),(0,b.jsxs)("div",{className:"text-xs mt-2 text-white/30",children:["Up to ",g," images"]})]}),(0,b.jsx)("input",{ref:l,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:q})]}),f&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-400",children:f}),h.length>0&&(0,b.jsxs)("p",{className:"mt-2 text-xs text-white/50",children:[h.length," / ",g," images"]})]})}])},32971,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(18521),f=a.i(1892),g=a.i(67459),h=a.i(86996),i=a.i(95813),j=a.i(77969),k=a.i(27958),l=a.i(57799),m=a.i(20975),n=a.i(31576),o=a.i(36245);let p=g.z.object({title:g.z.string().min(1,"Title is required"),publishingYear:g.z.number().int("Publishing year must be a whole number (e.g., 1999, 2000)").min(1e3,"Publishing year must be between 1000 and 2035").max(2035,"Publishing year must be between 1000 and 2035")});function q(){let a=(0,d.useRouter)(),{t:g}=(0,o.useI18n)(),q=(0,d.useParams)().id,[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),{register:B,handleSubmit:C,formState:{errors:D},setValue:E,reset:F}=(0,e.useForm)({resolver:(0,f.zodResolver)(p)});(0,c.useEffect)(()=>{let{initialize:b,isAuthenticated:c}=n.useAuthStore.getState();(b(),c)?G():a.push("/login")},[q,a]);let G=async()=>{try{w(!0);let a=await m.moviesApi.getById(q);F({title:a.title,publishingYear:a.publishingYear}),A(a.images||[a.poster].filter(Boolean))}catch(a){s(a.response?.data?.message||"Failed to load movie")}finally{w(!1)}},H=async b=>{try{u(!0),s(""),await m.moviesApi.update(q,{title:b.title,publishingYear:b.publishingYear,images:x.length>0?x:void 0}),a.push("/movies")}catch(a){a.response?.data?.errors&&Array.isArray(a.response.data.errors)?s(a.response.data.errors.map(a=>a.message).filter(a=>a).join("\n")):s(a.response?.data?.message||"Failed to update movie. Please check your input.")}finally{u(!1)}};return v?(0,b.jsx)("section",{className:"form-page px-7 py-12 pb-[160px] relative",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)("p",{className:"text-white/70",children:g("actions.loading")})})}):(0,b.jsxs)("section",{className:"form-page px-4 sm:px-7 py-8 sm:py-12 pb-[120px] sm:pb-[160px] relative",children:[(0,b.jsx)("div",{className:"absolute top-4 right-4",children:(0,b.jsx)(l.LanguageSwitcher,{})}),(0,b.jsx)("h2",{className:"form-page__title text-[32px] sm:text-[40px] md:text-[48px] mb-6 sm:mb-8 m-0 font-bold",children:g("movies.edit")}),(0,b.jsxs)("div",{className:"form-grid grid grid-cols-1 lg:grid-cols-[420px_1fr] gap-8 sm:gap-12 items-start",children:[(0,b.jsx)(j.MultipleImageUpload,{value:[...z,...x],onChange:y,maxImages:10}),(0,b.jsxs)("form",{className:"form flex flex-col gap-[18px] items-start w-full max-w-[560px]",onSubmit:C(H),children:[(0,b.jsx)(i.Input,{placeholder:g("movies.title"),...B("title"),error:D.title?.message}),(0,b.jsx)(i.Input,{type:"number",placeholder:g("movies.publishingYear"),...B("publishingYear",{valueAsNumber:!0}),error:D.publishingYear?.message}),r&&(0,b.jsx)("div",{className:"w-full max-w-[320px] p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,b.jsx)("div",{className:"space-y-2",children:("string"==typeof r?r:String(r)).split("\n").filter(a=>a.trim()).map((a,c)=>(0,b.jsxs)("p",{className:"text-red-400 text-sm font-medium",children:["• ",a.trim()]},c))})}),(0,b.jsxs)("div",{className:"form-actions flex gap-[18px] mt-[22px]",children:[(0,b.jsx)(h.Button,{variant:"ghost",type:"button",onClick:()=>{a.push("/movies")},children:g("actions.cancel")}),(0,b.jsx)(h.Button,{type:"submit",disabled:t,children:g(t?"actions.loading":"actions.update")})]})]})]}),(0,b.jsx)(k.FooterWave,{})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__34a87034._.js.map