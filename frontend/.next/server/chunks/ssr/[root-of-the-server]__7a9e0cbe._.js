module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},45056,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].React},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},31699,(a,b,c)=>{"use strict";b.exports=a.r(18622)},57850,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactJsxRuntime},97134,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactDOM},31437,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(31576),f=a.i(20975),g=a.i(70579),h=a.i(16497);let i=({movie:a,onEdit:c})=>{let d=a.images&&a.images.length>0?a.images[0]:a.poster;return(0,b.jsxs)("article",{className:"bg-black/12 rounded-[14px] overflow-visible shadow-[0_16px_0_rgba(0,0,0,0.22)] flex flex-col min-h-[350px] transition-transform hover:translate-y-[-6px] cursor-pointer",onClick:()=>c?.(a),children:[(0,b.jsxs)("div",{className:"h-[350px] m-3 rounded-xl bg-cover bg-center shadow-[0_10px_0_rgba(0,0,0,0.35)] relative overflow-hidden",children:[d?(0,b.jsx)(g.default,{src:d.startsWith("http")?d:`${h.uploadBaseUrl}${d}`,alt:a.title,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw",unoptimized:!0}):(0,b.jsx)("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white/50",children:"No Image"})}),a.images&&a.images.length>1&&(0,b.jsxs)("div",{className:"absolute top-2 right-2 bg-black/50 px-2 py-1 rounded text-white text-xs",children:[a.images.length," images"]})]}),(0,b.jsxs)("div",{className:"px-[18px] pb-[18px] flex flex-col justify-end bg-gradient-to-b from-black/4 to-transparent rounded-b-[14px]",children:[(0,b.jsx)("h3",{className:"text-base mb-2 font-semibold text-white opacity-95 m-0",children:a.title}),(0,b.jsx)("time",{className:"text-white/50 text-[13px]",children:a.publishingYear})]})]})};var j=a.i(86996),k=a.i(27958);let l=({value:a,onChange:c,placeholder:d="Search movies..."})=>(0,b.jsxs)("div",{className:"w-full max-w-md relative",children:[(0,b.jsx)("input",{type:"text",value:a,onChange:a=>c(a.target.value),placeholder:d,className:"w-full px-4 py-3 pl-10 rounded-lg bg-[rgba(255,255,255,0.03)] border border-white/10 text-white placeholder:text-white/35 focus:outline-none focus:border-[#33d583] focus:bg-[rgba(255,255,255,0.05)] transition-colors"}),(0,b.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/35",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a&&(0,b.jsx)("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/35 hover:text-white transition-colors",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]});var m=a.i(36245);let n=({value:a,onChange:c})=>{let{t:d}=(0,m.useI18n)(),e=new Date().getFullYear(),f=Array.from({length:e-1e3+1},(a,b)=>e-b);return(0,b.jsx)("div",{className:"w-full max-w-xs",children:(0,b.jsxs)("select",{value:a||"",onChange:a=>c(a.target.value?parseInt(a.target.value):null),className:"w-full px-4 py-3 rounded-lg bg-[rgba(255,255,255,0.03)] border border-white/10 text-white focus:outline-none focus:border-[#33d583] focus:bg-[rgba(255,255,255,0.05)] transition-colors cursor-pointer",children:[(0,b.jsx)("option",{value:"",children:d("movies.filterYear")}),f.map(a=>(0,b.jsx)("option",{value:a,className:"bg-[#06343a]",children:a},a))]})})},o=({images:a,title:d})=>{let[e,f]=(0,c.useState)(0);if(!a||0===a.length)return null;let i=a=>a.startsWith("http")?a:`${h.uploadBaseUrl}${a}`;return(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"relative w-full aspect-video rounded-xl overflow-hidden mb-4 bg-gray-800",children:[(0,b.jsx)(g.default,{src:i(a[e]),alt:d||`Image ${e+1}`,fill:!0,className:"object-cover",sizes:"100vw",unoptimized:!0}),a.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>f(b=>(b-1+a.length)%a.length),className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center text-white transition-colors",children:"‹"}),(0,b.jsx)("button",{onClick:()=>f(b=>(b+1)%a.length),className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center text-white transition-colors",children:"›"}),(0,b.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:a.map((a,c)=>(0,b.jsx)("button",{onClick:()=>f(c),className:`w-2 h-2 rounded-full transition-colors ${c===e?"bg-white":"bg-white/50"}`},c))})]})]}),a.length>1&&(0,b.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:a.map((a,c)=>(0,b.jsx)("button",{onClick:()=>f(c),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition-colors ${c===e?"border-[#33d583]":"border-transparent hover:border-white/30"}`,children:(0,b.jsx)(g.default,{src:i(a),alt:`Thumbnail ${c+1}`,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 25vw, 16vw",unoptimized:!0})},c))})]})},p=({movie:a,isOpen:c,onClose:d,onEdit:e,onDelete:f})=>{let{t:g}=(0,m.useI18n)();return c&&a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:d,children:(0,b.jsxs)("div",{className:"bg-[#0f4b51] rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"relative p-4",children:[(0,b.jsx)("button",{onClick:d,className:"absolute top-6 right-6 z-10 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center text-white transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.images&&a.images.length>0||a.poster?(0,b.jsx)(o,{images:a.images&&a.images.length>0?a.images:[a.poster].filter(Boolean),title:a.title}):(0,b.jsx)("div",{className:"w-full h-[400px] bg-gray-800 flex items-center justify-center rounded-xl",children:(0,b.jsx)("span",{className:"text-white/50",children:g("movies.noImage")})})]}),(0,b.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,b.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-2",children:a.title}),(0,b.jsxs)("p",{className:"text-white/70 text-lg mb-6",children:[g("movies.published"),": ",a.publishingYear]}),a.createdAt&&(0,b.jsxs)("p",{className:"text-white/50 text-sm mb-6",children:[g("movies.added"),": ",new Date(a.createdAt).toLocaleDateString()]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[e&&(0,b.jsxs)(j.Button,{onClick:()=>e(a),className:"flex-1",children:[g("actions.edit")," ",g("movies.movie")]}),f&&(0,b.jsx)(j.Button,{variant:"ghost",onClick:()=>{confirm(g("movies.deleteConfirm"))&&f(a)},className:"flex-1",children:g("movies.delete")})]})]})]})}):null};var q=a.i(57799);function r(){let a=(0,d.useRouter)(),{t:g}=(0,m.useI18n)();(0,e.useAuthStore)(a=>a.isAuthenticated);let h=(0,e.useAuthStore)(a=>a.logout),[o,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(1),[w,x]=(0,c.useState)(1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let{initialize:a}=e.useAuthStore.getState();a()},[]),(0,c.useEffect)(()=>{let{isAuthenticated:b}=e.useAuthStore.getState();b?I():a.push("/login")},[]),(0,c.useEffect)(()=>{v(1)},[A,C]);let I=async()=>{try{t(!0),z("");let a=await f.moviesApi.getAll(1,1e3);r(a.data);let b=await f.moviesApi.getAll(u,8);x(b.totalPages)}catch(a){z(a.response?.data?.message||"Failed to load movies")}finally{t(!1)}},J=(0,c.useMemo)(()=>{let a=o;return A&&(a=a.filter(a=>a.title.toLowerCase().includes(A.toLowerCase()))),C&&(a=a.filter(a=>a.publishingYear===C)),a},[o,A,C]),K=(0,c.useMemo)(()=>{let a=(u-1)*8;return J.slice(a,a+8)},[J,u]),L=Math.ceil(J.length/8),M=()=>{a.push("/movies/create")},N=async a=>{try{await f.moviesApi.delete(a.id),H(!1),F(null),I()}catch(a){z(a.response?.data?.message||"Failed to delete movie")}};return s?(0,b.jsx)("main",{className:"container max-w-[1200px] mx-auto mt-9 px-7",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)("p",{className:"text-white/70",children:g("actions.loading")})})}):y&&0===o.length?(0,b.jsx)("main",{className:"container max-w-[1200px] mx-auto mt-9 px-7",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)("p",{className:"text-red-400",children:y})})}):0!==o.length||s?(0,b.jsxs)("main",{className:"container max-w-[1200px] mx-auto mt-4 sm:mt-9 px-4 sm:px-7 relative pb-[120px] sm:pb-[160px]",children:[(0,b.jsxs)("header",{className:"topbar flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 my-6 sm:my-9",children:[(0,b.jsxs)("h2",{className:"page-title text-[28px] sm:text-[36px] md:text-[40px] font-bold m-0 flex items-center",children:[g("movies.myMovies"),(0,b.jsx)("span",{className:"plus ml-2 font-bold opacity-90 cursor-pointer text-[28px] sm:text-[36px] md:text-[40px] hover:opacity-100 transition-opacity",onClick:M,title:g("movies.addNew"),children:"+"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(q.LanguageSwitcher,{}),(0,b.jsxs)("a",{className:"logout text-white/90 no-underline font-semibold cursor-pointer hover:text-white transition-colors text-sm sm:text-base",onClick:()=>{h(),a.push("/login")},children:[g("actions.logout")," ↗"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 sm:mb-8",children:[(0,b.jsx)(l,{value:A,onChange:B,placeholder:g("movies.search")}),(0,b.jsx)(n,{value:C,onChange:D}),(A||C)&&(0,b.jsx)(j.Button,{variant:"ghost",onClick:()=>{B(""),D(null),v(1)},className:"whitespace-nowrap",children:g("movies.clearFilters")})]}),y&&(0,b.jsx)("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-500 rounded-lg",children:(0,b.jsx)("p",{className:"text-red-400 text-sm",children:y})}),(A||C)&&(0,b.jsxs)("div",{className:"mb-4 text-white/70 text-sm",children:[g("movies.found")," ",J.length," ",g(1!==J.length?"movies.movies":"movies.movie")]}),0===K.length&&!s&&(A||C)?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-white/70 text-lg mb-4",children:g("movies.noResults")}),(0,b.jsx)(j.Button,{variant:"ghost",onClick:()=>{B(""),D(null),v(1)},children:g("movies.clearFilters")})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("section",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-7 mb-8 sm:mb-12",children:K.map(a=>(0,b.jsx)(i,{movie:a,onEdit:()=>{F(a),H(!0)}},a.id))}),L>1&&(0,b.jsxs)("nav",{className:"pagination flex flex-wrap justify-center gap-2 mb-[80px] sm:mb-[120px]",children:[(0,b.jsx)("button",{className:"pager bg-transparent border-0 text-white/90 px-3 py-2 rounded-md font-semibold cursor-pointer hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",onClick:()=>v(a=>Math.max(1,a-1)),disabled:1===u,children:g("actions.prev")}),Array.from({length:Math.min(L,10)},(a,c)=>{let d;return d=L<=10||u<=5?c+1:u>=L-4?L-9+c:u-5+c,(0,b.jsx)("button",{className:`pager bg-transparent border-0 text-white/90 px-3 py-2 rounded-md font-semibold cursor-pointer hover:text-white transition-colors text-sm sm:text-base ${d===u?"bg-[#33d583] font-bold text-[#06343a]":""}`,onClick:()=>v(d),children:d},d)}),(0,b.jsx)("button",{className:"pager bg-transparent border-0 text-white/90 px-3 py-2 rounded-md font-semibold cursor-pointer hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",onClick:()=>v(a=>Math.min(L,a+1)),disabled:u===L,children:g("actions.next")})]})]}),(0,b.jsx)(k.FooterWave,{}),(0,b.jsx)(p,{movie:E,isOpen:G,onClose:()=>{H(!1),F(null)},onEdit:b=>{H(!1),a.push(`/movies/${b.id}/edit`)},onDelete:N})]}):(0,b.jsxs)("section",{className:"hero hero--empty flex flex-col items-center justify-center text-center px-4 py-[100px] sm:py-[160px] pb-[120px] sm:pb-[160px] relative min-h-[420px]",children:[(0,b.jsx)("h2",{className:"hero__title text-[32px] sm:text-[48px] md:text-[64px] font-bold mb-5 sm:mb-7 text-white leading-none tracking-[-0.02em] m-0",children:g("movies.empty")}),(0,b.jsx)(j.Button,{onClick:M,size:"md",children:g("movies.addNew")}),(0,b.jsx)(k.FooterWave,{})]})}a.s(["default",()=>r],31437)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7a9e0cbe._.js.map